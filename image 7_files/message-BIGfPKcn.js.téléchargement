import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as B,i as v,s as C,e as T,h as E,p as L,q as S,a as f,b as k,k as h,m as R,l as b,u as P,d as j,t as x,f as G,j as H,r as F,v as z,w as q}from"./_commonjsHelpers-OiH3xl5W.js";import{L as i,C as _}from"./types-TycpPcdk.js";import{C as A,c as w,B as N}from"./bowser-ClSBMl0z.js";function U(t){let s,n,a,c,l,o,m,d,r,g,p;return a=new A({props:{class:"size-3"}}),{c(){s=T("main"),n=T("button"),E(a.$$.fragment),l=L(),o=T("div"),m=S(t[0]),f(n,"class",c=w("size-5 rounded-full justify-center items-center bg-gray-400 hover:bg-gray-500 text-white hover:shadow transition-colors flex",{"hidden group-hover:flex mb-2":!t[4],"p-1 mb-1":t[4],"ml-auto":t[1]===i.BOTTOM_RIGHT,"mr-auto":t[1]===i.BOTTOM_LEFT})),f(o,"class","bg-white shadow-md hover:shadow-lg py-3 px-4.5 rounded-xl max-w-full text-balance break-words cursor-pointer"),f(o,"role","presentation"),f(s,"class",d=w("h-full flex flex-col justify-end group items-center",{"items-end":t[1]===i.BOTTOM_RIGHT,"items-start":t[1]===i.BOTTOM_LEFT,hidden:t[3]}))},m(e,u){k(e,s,u),h(s,n),R(a,n,null),h(s,l),h(s,o),h(o,m),t[7](o),r=!0,g||(p=[b(n,"click",t[5]),b(o,"click",t[6])],g=!0)},p(e,[u]){(!r||u&2&&c!==(c=w("size-5 rounded-full justify-center items-center bg-gray-400 hover:bg-gray-500 text-white hover:shadow transition-colors flex",{"hidden group-hover:flex mb-2":!e[4],"p-1 mb-1":e[4],"ml-auto":e[1]===i.BOTTOM_RIGHT,"mr-auto":e[1]===i.BOTTOM_LEFT})))&&f(n,"class",c),(!r||u&1)&&P(m,e[0]),(!r||u&10&&d!==(d=w("h-full flex flex-col justify-end group items-center",{"items-end":e[1]===i.BOTTOM_RIGHT,"items-start":e[1]===i.BOTTOM_LEFT,hidden:e[3]})))&&f(s,"class",d)},i(e){r||(j(a.$$.fragment,e),r=!0)},o(e){x(a.$$.fragment,e),r=!1},d(e){e&&G(s),H(a),t[7](null),g=!1,F(p)}}}function V(t,s,n){let{text:a=""}=s,{location:c=i.BOTTOM_RIGHT}=s,l,o=!1;const m=N.getParser(window.navigator.userAgent),d=m.getOS().name==="iOS"&&m.getPlatformType()==="mobile",r=e=>{e.stopPropagation(),window.parent.postMessage({type:_.CLOSE},"*"),localStorage.setItem("isClosed","true"),n(3,o=!0)},g=e=>{e.stopPropagation(),window.parent.postMessage({type:_.MAXIMIZE},"*")};z(()=>{if(n(3,o=localStorage.getItem("isClosed")==="true"),!o){const e=new IntersectionObserver(u=>{u[0].isIntersecting&&(window.parent.postMessage({type:_.VISIBILITY,rect:l.getBoundingClientRect()},"*"),e.disconnect())});e.observe(l)}});function p(e){q[e?"unshift":"push"](()=>{l=e,n(2,l)})}return t.$$set=e=>{"text"in e&&n(0,a=e.text),"location"in e&&n(1,c=e.location)},[a,c,l,o,d,r,g,p]}class X extends B{constructor(s){super(),v(this,s,V,U,C,{text:0,location:1})}}const O=document.getElementById("app");if(O==null)throw new Error("Missing app element");const M=new URLSearchParams(window.location.search),I=M.get("text"),y=M.get("position");if(I==null||y==null)throw new Error("Missing text or location");new X({target:O,props:{text:I,location:y}});
